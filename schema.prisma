// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url      = env("DATABASE_URL")
  provider = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model Post {
  id        String  @id @default(cuid())
  title     String  @default("")
  slug      String  @unique @default("")
  author    User[]  @relation("Post_author")
  published Boolean @default(false)
  role      String?
  content   String  @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
}

model User {
  id                   String       @id @default(cuid())
  name                 String       @default("")
  username             String       @default("")
  email                String       @unique @default("")
  password             String
  accountCreated       DateTime?    @default(now())
  isOver18             Boolean      @default(false)
  pronouns             String       @default("")
  eventsAttended       String       @default("")
  discord              String       @default("")
  twitter              String       @default("")
  submissions          Submission[] @relation("Submission_user")
  roleRunner           Boolean      @default(false)
  roleTech             Boolean      @default(false)
  roleRunnerManagement Boolean      @default(false)
  roleAdmin            Boolean      @default(false)
  from_Post_author     Post[]       @relation("Post_author")
}

model Submission {
  id                String    @id @default(cuid())
  user              User?     @relation("Submission_user", fields: [userId], references: [id])
  userId            String?   @map("user")
  created           DateTime? @default(now())
  game              String    @default("")
  category          String    @default("")
  platform          String    @default("")
  estimate          String    @default("")
  ageRating         String?   @default("M_or_Lower")
  donationIncentive String    @default("")
  race              String?   @default("no")
  racer             String    @default("")
  coop              Boolean   @default(false)
  video             String    @default("")
  status            String?   @default("submitted")
  event             Event?    @relation("Submission_event", fields: [eventId], references: [id])
  eventId           String?   @map("event")

  @@index([userId])
  @@index([eventId])
}

model Event {
  id                   String       @id @default(cuid())
  name                 String       @default("")
  shortname            String       @default("")
  raised               Float?
  submissions          Submission[] @relation("Submission_event")
  acceptingSubmissions Boolean      @default(false)
}